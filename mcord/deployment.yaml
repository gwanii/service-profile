tosca_definitions_version: tosca_simple_yaml_1_0

imports:
   - custom_types/xos.yaml

description: deployment config, generated by platform-install

topology_template:
  node_templates:

# Flavors

    m1.small:
      type: tosca.nodes.Flavor

    m1.medium:
      type: tosca.nodes.Flavor

    m1.large:
      type: tosca.nodes.Flavor

    m1.xlarge:
      type: tosca.nodes.Flavor


# Deployment
    MyDeployment:
      type: tosca.nodes.Deployment
      requirements:
          - m1.small:
              node: m1.small
              relationship: tosca.relationships.SupportsFlavor

          - m1.medium:
              node: m1.medium
              relationship: tosca.relationships.SupportsFlavor

          - m1.large:
              node: m1.large
              relationship: tosca.relationships.SupportsFlavor

          - m1.xlarge:
              node: m1.xlarge
              relationship: tosca.relationships.SupportsFlavor


# Site
    mysite:
      type: tosca.nodes.Site
      properties:
          display_name: MySite
          site_url: http://mysite.opencloud.us/
          hosts_nodes: true
      requirements:
        - deployment:
            node: MyDeployment
            relationship: tosca.relationships.MemberOfDeployment

# Attach the Tenant view to the deployment
    Tenant:
      type: tosca.nodes.DashboardView
      properties:
          no-create: true
          no-delete: true
      requirements:
          - deployment:
              node: MyDeployment
              relationship: tosca.relationships.SupportsDeployment

# XOS Users
    padmin@vicci.org:
      type: tosca.nodes.User
      properties:
        password: letmein
        firstname: PAdmin
        lastname: VicciOrg
        is_admin: True
      requirements:
        - site:
            node: mysite
            relationship: tosca.relationships.MemberOfSite
        - tenant_dashboard:
              node: Tenant
              relationship: tosca.relationships.UsesDashboard

